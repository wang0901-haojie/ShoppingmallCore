
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <script src="~/layui-v2.5.7/layui/layui.js"></script>
    <link href="~/layui-v2.5.7/layui/css/layui.css" rel="stylesheet" />
    <script src="~/lib/jquery/dist/jquery.js"></script>
    <link href="~/lib/bootstrap/dist/css/bootstrap.css" rel="stylesheet" />

    <title>HuowuYubao</title>
</head>
<body>
    <div class="layui-tab">
        <ul class="layui-tab-title">
            <li class="layui-this">添加预报</li>
            <li>批量预报</li>
            <li>批量导入</li>
        </ul>
        <div class="layui-tab-content">
            <div class="layui-tab-item layui-show">
                <table>
                    <tr>
                        <td>选择集货仓库</td>
                        <td>
                            <select id="Selectck" name="CKName">
                                <option></option>
                                <option></option>
                                <option></option>
                            </select>

                            <br /><br />
                        </td>
                    </tr>
                    <tr>
                        <td>快递单号</td>
                        <td>
                            <input id="txt_Danhao" type="text" name="KudiDH" />
                            <input id="Button1" type="button" value="查询快递公司" onclick="Chaxunkuaidi()" />
                            <br /><br />
                        </td>
                    </tr>
                    <tr>
                        <td>快递公司</td>
                        <td>
                            <select id="Selectkd" name="KName">
                                <option></option>
                                <option></option>
                                <option></option>
                            </select>
                            <br />
                            <br />
                        </td>
                    </tr>
                    <tr>
                        <td>票单立刻转运</td>
                        <td>
                            <input id="txt_S" type="text" name="Likezhuanyun" /><br />
                            <br />
                        </td>
                    </tr>
                    <tr>
                        <td>货物信息</td>
                        <td>
                            <input id="txt_Xinxi" type="text" name="GoodID" />
                            <input id="Button1" type="button" value="获取信息" onclick="Chaxun()" />
                        </td>
                    </tr>
                    <tbody id="tb111"></tbody>
                    <tr>
                        <td>备注</td>
                        <td>
                            <textarea id="text_beizhu" rows="2" cols="20" name="Beizhu"></textarea>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input id="Button1" type="button" value="提交" onclick="Add()" />
                        </td>
                    </tr>
                </table>
            </div>
            <div class="layui-tab-item">
                <table class="table table-bordered">
                    <tr>
                        <td>快递公司</td>
                        <td>快递单号</td>
                        <td>品名</td>
                        <td>货值</td>
                        <td>数量</td>
                        <td>备注</td>
                        <td>操作</td>
                    </tr>
                    <tr>
                        <td>
                            <select id="Selectkd1" name="KName">
                                <option></option>
                                <option></option>
                                <option></option>
                            </select>
                        </td>
                        <td>
                            <input id="txt_Danhao123" type="text" name="KudiDH" placeholder="请输入快递单号" />
                        </td>
                        <td>
                            <input id="txt_Pingming" type="text" name="Zhongwenpinm" placeholder="请输入品名" />
                        </td>
                        <td>
                            <input id="txt_Huozhi" type="text" name="Huozhi" placeholder="请输入货值" />
                        </td>
                        <td>
                            <input id="txt_shuliang" type="text" name="Shuliang" placeholder="请输入数量" />
                        </td>
                        <td>
                            <input id="txt_Beizhu" type="text" name="Beizhu" placeholder="请输入备注" />
                        </td>
                        <td>
                            <input id="Button1" type="button" value="删除" onclick="Delpl()" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <select id="Selectkd2" name="KName">
                                <option></option>
                                <option></option>
                                <option></option>
                            </select>
                        </td>
                        <td>
                            <input id="txt_Danhao" type="text" name="KudiDH" placeholder="请输入快递单号" />
                        </td>
                        <td>
                            <input id="txt_Pingming" type="text" name="Zhongwenpinm" placeholder="请输入品名" />
                        </td>
                        <td>
                            <input id="txt_Huozhi" type="text" name="Huozhi" placeholder="请输入货值" />
                        </td>
                        <td>
                            <input id="txt_shuliang" type="text" name="Shuliang" placeholder="请输入数量" />
                        </td>
                        <td>
                            <input id="txt_Beizhu" type="text" name="Beizhu" placeholder="请输入备注" />
                        </td>
                        <td>
                            <input id="Button1" type="button" value="删除" onclick="Delpl1()" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <select id="Selectkd3" name="KName">
                                <option></option>
                                <option></option>
                                <option></option>
                            </select>
                        </td>
                        <td>
                            <input id="txt_Danhao" type="text" name="kudiDH" placeholder="请输入快递单号" />
                        </td>
                        <td>
                            <input id="txt_Pingming" type="text" name="Zhongwenpinm" placeholder="请输入品名" />
                        </td>
                        <td>
                            <input id="txt_Huozhi" type="text" name="Huozhi" placeholder="请输入货值" />
                        </td>
                        <td>
                            <input id="txt_shuliang" type="text" name="Shuliang" placeholder="请输入数量" />
                        </td>
                        <td>
                            <input id="txt_Beizhu" type="text" name="Beizhu" placeholder="请输入备注" />
                        </td>
                        <td>
                            <input id="Button1" type="button" value="删除" onclick="Delpl2()" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input id="Button1" type="button" value="提交" onclick="Addpl()" />
                            <input id="Reset1" type="reset" value="取消" />
                        </td>
                    </tr>
                </table>
            </div>
            <div class="layui-tab-item">
                <table>
                    <tr>
                        <td>
                            上传数据:<input type="file" name="file" id="test20" value="添加文件"><br />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            当前仅支持.csv .xml 等Excel格式文件（大小在500M以内），请使用Office 2010及以上版本，否则可能出现乱码<br />
                            必须严格按照模版内容填入客户数据，否则可能会出现导入异常
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <button type="button" class="layui-btn" id="test3"><i class="layui-icon"></i>上传文件</button>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</body>
</html>
<script>
    layui.use('element', function () {
        var $ = layui.jquery
            , element = layui.element; //Tab的切换功能，切换事件监听等，需要依赖element模块

        //触发事件
        var active = {
            tabAdd: function () {
                //新增一个Tab项
                element.tabAdd('demo', {
                    title: '新选项' + (Math.random() * 1000 | 0) //用于演示
                    , content: '内容' + (Math.random() * 1000 | 0)
                    , id: new Date().getTime() //实际使用一般是规定好的id，这里以时间戳模拟下
                })
            }
            , tabChange: function () {
                //切换到指定Tab项
                element.tabChange('demo', '22'); //切换到：用户管理
            }
        };
    });
</script>
<script>
    layui.use('upload', function () {
        var $ = layui.jquery
            , upload = layui.upload;
        //绑定原始文件域
        upload.render({
            elem: '#test20'
            , url: 'https://httpbin.org/post' //改成您自己的上传接口
            , done: function (res) {
                layer.msg('上传成功');
                console.log(res)
            }
        });

        //指定允许上传的文件类型
        upload.render({
            elem: '#test3'
            , url: 'https://httpbin.org/post' //改成您自己的上传接口
            , accept: 'file' //普通文件
            , done: function (res) {
                layer.msg('上传成功');
                console.log(res);
            }
        });
    });


</script>
<script>
    $(function () {
        Selectck();
        Selectkd();
        Show();
    })
    function Add() {
        var arr = {};
        arr.KudiDH = $("#txt_Danhao").val();
        arr.Likezhuanyun = $("#txt_S").val();
        arr.Zhongwenpinm = $("#txt_GoodName1").val();
        arr.Huozhi = $("#txt_GoodRemark1").val();
        arr.Shuliang = $("#txt_GoodNum1").val();
        arr.Beizhu = $("#text_beizhu").val();
        $.ajax({
            url: 'http://localhost:59152/api/GetHuowuyubaoAdd',
            type: 'post',
            data: JSON.stringify(arr),
            contentType: 'application/json',
            success: function (d) {
                if (d > 0) {
                    alert("添加成功");
                    location.href = '/Shoppingwhj/HuowuYubao';
                }
                else {
                    alert("添加失败");
                }
            }
        })
    }


    //仓库下拉
    function Selectck() {
        $.ajax({
            url: 'http://localhost:59152/api/GetGoodInfoAddCk',
            type: 'get',
            contentType: 'application/json',
            success: function (d) {
                $("#Selectck").empty();
                $("#Selectck").append('<option>请选择</option>');
                $(d).each(function () {
                    var str = "<option value=" + this.ckId + ">" + this.ckName + "</option>";
                    $("#Selectck").append(str);
                })
            }
        })
    }

    //包裹预报  快递下拉
    function Selectkd() {
        $.ajax({
            url: 'http://localhost:59152/api/GetGoodInfoAddXiala',
            type: 'get',
            contentType: 'application/json',
            success: function (d) {
                $("#Selectkd").empty();
                $("#Selectkd").append('<option>请选择</option>');
                $(d).each(function () {
                    var str = "<option value=" + this.kId + ">" + this.kName + "</option>";
                    $("#Selectkd").append(str);
                })
            }
        })
    }

    //查询
    function Chaxun() {
        var id = $("#txt_Xinxi").val();
        $.ajax({
            url: 'http://localhost:59152/api/GetGoodInfoAddCX',
            type: 'get',
            data: { id: id },
            contentType: 'application/json',
            success: function (d) {
                $("#tb111").empty();
                $(d).each(function () {
                    var str = "<tr>" +
                        "<tr class='table table-bordered'>" +
                        "<td>中文品名</td>" +
                        "<td>货值</td>" +
                        "<td>数量</td>" +
                        "<td>操作</td>" +
                        "</tr>" +
                        "<tr class='table table-bordered'>" +
                        "<td><input id='txt_GoodName1' type='text' name='Zhongwenpinm' value='" + this.goodName + "' /></td>" +
                        "<td><input id='txt_GoodRemark1' type='text' name='Huozhi'  value='" + this.goodPrice + "'/></td>" +
                        "<td><input id='txt_GoodNum1' type='text' name='Shuliang'  value='" + this.goodNum + "'/></td>" +
                        "</tr>" +
                        "</tr >";
                    $("#tb111").append(str);
                })
            }
        })
    }

    function Chaxunkuaidi() {
        var Danhao = $("#txt_Danhao").val();
        $.ajax({
            url: 'http://localhost:59152/api/GetKuaidiInfoAddCX',
            data: { KDanhao: Danhao },
            type: 'get',
            contentType: 'application/json',
            success: function (d) {
                $("#Selectkd").empty();
                $(d).each(function () {
                    $("#Selectkd").empty();
                    $("#Selectkd").append('<option>请选择</option>');
                    $(d).each(function () {
                        var str = "<option value=" + this.kId + ">" + this.kName + "</option>";
                        $("#Selectkd").append(str);
                    })
                })
            }
        })
    }
</script>
<script>
    $(function () {
        Selectkd();
        Selectkd1();
        Selectkd2();
    })
    //包裹预报  快递下拉
    function Selectkd() {
        $.ajax({
            url: 'http://localhost:59152/api/GetGoodInfoAddXiala',
            type: 'get',
            contentType: 'application/json',
            success: function (d) {
                $("#Selectkd1").empty();
                $("#Selectkd1").append('<option>请选择</option>');
                $(d).each(function () {
                    var str = "<option value=" + this.kId + ">" + this.kName + "</option>";
                    $("#Selectkd1").append(str);
                })
            }
        })
    }
    //包裹预报  快递下拉
    function Selectkd1() {
        $.ajax({
            url: 'http://localhost:59152/api/GetGoodInfoAddXiala',
            type: 'get',
            contentType: 'application/json',
            success: function (d) {
                $("#Selectkd2").empty();
                $("#Selectkd2").append('<option>请选择</option>');
                $(d).each(function () {
                    var str = "<option value=" + this.kId + ">" + this.kName + "</option>";
                    $("#Selectkd2").append(str);
                })
            }
        })
    }
    //包裹预报  快递下拉
    function Selectkd2() {
        $.ajax({
            url: 'http://localhost:59152/api/GetGoodInfoAddXiala',
            type: 'get',
            contentType: 'application/json',
            success: function (d) {
                $("#Selectkd3").empty();
                $("#Selectkd3").append('<option>请选择</option>');
                $(d).each(function () {
                    var str = "<option value=" + this.kId + ">" + this.kName + "</option>";
                    $("#Selectkd3").append(str);
                })
            }
        })
    }
    function Addpl() {
        var arr = {};
        arr.Zhongwenpinm = $("#txt_Pingming").val();
        arr.Huozhi = $("#txt_Huozhi").val();
        arr.Shuliang = $("#txt_shuliang").val();
        arr.KudiDH = $("#txt_Danhao123").val();
        arr.Beizhu = $("#txt_Beizhu").val();
        $.ajax({
            url: 'http://localhost:59152/api/GetGoodInfoPLAdd',
            data: JSON.stringify(arr),
            type: 'post',
            contentType: 'application/json',
            success: function (d) {
                if (d > 0) {
                    alert("添加成功");
                    location.href = '/Shoppingwhj/HuowuYubao';
                }
                else {
                    alert("添加失败");
                }
            }
        })
    }

    function Delpl() {
        var arr = {};
        arr.Zhongwenpinm = $("#txt_Pingming").val();
        arr.Huozhi = $("#txt_Huozhi").val();
        arr.Shuliang = $("#txt_shuliang").val();
        arr.KudiDH = $("#txt_Danhao123").val();
        arr.Beizhu = $("#txt_Beizhu").val();
        $.ajax({
            url: 'http://localhost:59152/api/GetGoodInfoPLDel?KudiDH=' + arr.KudiDH + "&Zhongwenpinm=" + arr.Zhongwenpinm + "&Huozhi=" + arr.Huozhi + "&Shuliang=" + arr.Shuliang + "&Beizhu=" + arr.Beizhu,
            data: JSON.stringify(arr),
            type: 'post',
            contentType: 'application/json',
            success: function (d) {
                if (d > 0) {
                    alert("删除成功");
                    location.href = '/Shoppingwhj/HuowuYubao';
                }
                else {
                    alert("删除失败");
                }
            }
        })
    }
</script>

